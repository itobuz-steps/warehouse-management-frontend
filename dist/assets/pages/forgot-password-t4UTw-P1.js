import"../modulepreload-polyfill-B5Qt9EMX.js";import{s as l}from"../showPasswordToggle-bpwKeFfH.js";import"../bootstrap.esm-C02OvDcj.js";import{a,T as d}from"../index-C0eOhpfv.js";import{c as i}from"../config-E-HGwCPq.js";const e={emailForm:document.getElementById("emailForm"),otpForm:document.getElementById("otpForm"),emailInput:document.getElementById("email"),otpInput:document.getElementById("otp"),newPasswordInput:document.getElementById("newPassword"),toastSection:document.getElementById("toastSection"),resendButton:document.querySelector(".resend-btn"),otpTimerSection:document.querySelector(".timer"),otpCounter:document.querySelector(".counter")},o=new d;class u{sendOtp=async t=>{t.preventDefault();const s=e.emailInput.value.trim();try{(await a.post(`${i.AUTH_BASE_URL}/send-otp`,{email:s})).data.success&&(e.emailForm.style.display="none",e.otpForm.classList.remove("d-none"),e.toastSection.innerHTML=o.successToast("OTP sent! Check your Email")),this.timer()}catch(r){e.toastSection.innerHTML=o.errorToast(r.response.data.message)}finally{setTimeout(()=>{e.toastSection.innerHTML=""},3e3)}};resetPassword=async t=>{t.preventDefault();const s=e.emailInput.value.trim(),r=e.otpInput.value.trim(),c=e.newPasswordInput.value.trim();(!r||!c)&&(e.toastSection.innerHTML=o.errorToast("Please fill all the fields"));try{(await a.post(`${i.AUTH_BASE_URL}/forgot-password/${s}`,{email:s,otp:r,password:c})).data.success&&(e.toastSection.innerHTML=o.successToast("Password Reset Successful. Redirecting to Login Page.."),setTimeout(()=>{window.location.href="/pages/login.html"},1500))}catch(m){e.toastSection.innerHTML=o.errorToast(m.response.data.message)}finally{setTimeout(()=>{e.toastSection.innerHTML=""},3e3)}};resendOtp=async()=>{const t=e.emailInput.value.trim();e.otpCounter.innerHTML="00:59",this.timer(),e.resendButton.style.display="none";try{(await a.post(`${i.AUTH_BASE_URL}/send-otp`,{email:t})).data.success&&(e.emailForm.style.display="none",e.otpForm.style.display="block",e.toastSection.innerHTML=o.successToast("OTP sent again! Check your Email"))}catch(s){e.toastSection.innerHTML=o.errorToast(s.response.data.message)}finally{setTimeout(()=>{e.toastSection.innerHTML=""},3e3)}};timer=()=>{let t=e.otpCounter.innerHTML.split(":")[1],s=setInterval(()=>{t=="00"?(clearInterval(s),e.resendButton.classList.remove("d-none")):(t-=1,e.otpCounter.innerHTML=t<10?"00:0"+t:"00:"+t)},1e3)}}document.addEventListener("DOMContentLoaded",()=>{const n=new u;e.emailForm.addEventListener("submit",n.sendOtp),e.otpForm.addEventListener("submit",n.resetPassword),e.resendButton.addEventListener("click",n.resendOtp)});const p=document.getElementById("toggleNewPassword");p.addEventListener("click",()=>{const n=document.getElementById("newPassword");l(n)});
