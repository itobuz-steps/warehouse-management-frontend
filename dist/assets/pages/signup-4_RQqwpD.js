import"../modulepreload-polyfill-B5Qt9EMX.js";import{s as p}from"../showPasswordToggle-bpwKeFfH.js";import"../bootstrap.esm-C02OvDcj.js";import{a as i,T as u}from"../index-C0eOhpfv.js";import{c as r}from"../config-vXPTaLOK.js";const t={signupForm:document.getElementById("signupForm"),signupContainer:document.getElementById("signupContainer"),unauthorizedMessage:document.getElementById("unauthorizedMessage"),expiredMessage:document.getElementById("expiredMessage"),togglePassword:document.getElementById("togglePassword")},a=new u,n=document.getElementById("toastSection"),l=async e=>{try{e.preventDefault();const s=new FormData(e.target),d=s.get("name"),c=s.get("password"),g={name:d,password:c},m=await i.post(`${r.AUTH_BASE_URL}/signup/set-password/${o}`,g,{headers:{"Content-Type":"application/json"}});n.innerHTML=a.successToast(m.data.message),setTimeout(()=>{window.location.href="./login.html"},1e3)}catch(s){n.innerHTML=a.errorToast(s.response.data.message)}finally{setTimeout(()=>{n.innerHTML=""},3e3)}},w=new URLSearchParams(window.location.search),o=w.get("token");t.togglePassword.addEventListener("click",()=>{console.log("huh");const e=document.getElementById("password");p(e)});o?(t.signupContainer.classList.remove("d-none"),y(o)):t.unauthorizedMessage.classList.remove("d-none");t.signupForm.addEventListener("submit",l);async function y(e){try{await i.post(`${r.AUTH_BASE_URL}/signup/${e}`)}catch(s){s.response.data.message=="Link Expired"&&(t.expiredMessage.classList.remove("d-none"),t.signupContainer.classList.add("d-none"))}}
