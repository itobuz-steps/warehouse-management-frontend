<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Inventory Dashboard</title>
    <!-- <link
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css"
      rel="stylesheet"
    /> -->
    <!-- <link href="../scss/dashboard.scss" rel="stylesheet" /> -->
    <script type="module" src="../js/common/sidebar.js" defer></script>
    <script
      type="module"
      src="../js/common/notifications/notifications.js"
    ></script>
  </head>
  <body>
    <div id="toastSection">
      <!-- custom toast message -->
    </div>

    <!-- Add Manager Modal -->
    <div
      class="modal fade"
      id="addManagerModal"
      tabindex="-1"
      aria-labelledby="addManagerModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="addManagerModalLabel">
              Add New Manager
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <form id="addManagerForm" class="add-manager-form add-form">
              <div class="mb-3">
                <label for="email" class="form-label">Email</label>
                <input
                  type="email"
                  name="email"
                  id="email"
                  class="form-control"
                  placeholder="Enter manager email"
                  required
                />
              </div>

              <button type="submit" class="btn-primary">Add Manager</button>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- Sidebar -->
    <button class="sidebar-toggle" id="sidebarToggle">
      <i title="Sidebar" class="fa-solid fa-circle-chevron-right"></i>
    </button>
    <div id="sidebar-container"></div>

    <!-- Main Dashboard -->
    <main class="main-content">
      <div class="dashboard-header">
        <div>
          <h1>Hello <span class="user-role">Admin</span>, Welcome Back</h1>
          <p>Here's an overview of your warehouse performance</p>
        </div>
        <div class="header-actions">
          <button
            class="add-manager-btn"
            data-bs-toggle="modal"
            data-bs-target="#addManagerModal"
          >
            Add Manager
          </button>

          <div
            class="notif-bell position-relative"
            data-bs-toggle="offcanvas"
            data-bs-target="#offcanvasNotifications"
            aria-controls="offcanvasNotifications"
            style="cursor: pointer"
          >
            <i class="fa-regular fa-bell"></i>
            <span
              id="notif-count"
              class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"
              style="display: none"
            >
              0
            </span>
          </div>
        </div>
      </div>

      <!-- Notification Offcanvas -->
      <div
        class="offcanvas offcanvas-end"
        tabindex="-1"
        id="offcanvasNotifications"
        aria-labelledby="offcanvasNotificationsLabel"
      >
        <div class="offcanvas-header">
          <h5 class="offcanvas-title" id="offcanvasNotificationsLabel">
            Notifications
          </h5>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="offcanvas"
            aria-label="Close"
          ></button>
        </div>
        <div class="offcanvas-body">
          <div id="notif-list">
            <p class="text-muted text-center">Loading notifications...</p>
          </div>
        </div>
      </div>

      <!-- Overview Cards -->
      <select id="warehouseSelect" class="form-control w-25 my-4"></select>

      <section class="overview-grid">
        <div class="overview-card">
          <div class="card-title">Sales Overview</div>
          <div class="card-value" id="salesInput">₹0</div>
          <div class="card-sub" id="saleQuantity">0 Sales</div>
        </div>
        <div class="overview-card" id="Purchase">
          <div class="card-title">Purchase Overview</div>
          <div class="card-value" id="purchaseInput">₹0</div>
          <div class="card-sub" id="purchaseQuantity">0 Purchases</div>
        </div>
        <div class="overview-card">
          <div class="card-title">Inventory Summary</div>
          <div class="card-value" id="inventoryInput">0</div>
        </div>
        <div class="overview-card">
          <div class="card-title">Today's Shipment</div>
          <div class="card-value" id="shipmentInput">0</div>
        </div>
      </section>

      <!-- Static Charts -->
      <section class="charts-grid">
        <!-- Sales & Purchase Chart -->
        <div class="chart-card">
          <h5>Top 5 Products</h5>
          <canvas id="barGraph"></canvas>
          <button
            id="exportTop5"
            class="btn btn-success"
            style="width: 110px; font-weight: 500"
          >
            <i class="fa-solid fa-file-excel"></i> Export
          </button>
        </div>

        <!-- Product Category Chart -->
        <div class="chart-card">
          <h5>Products category</h5>
          <canvas id="pieChart"></canvas>
        </div>

        <!-- Order Summary Chart -->
        <div class="chart-card">
          <h5>Transactions/day</h5>
          <div class="line-chart">
            <canvas id="lineChart"></canvas>
          </div>
        </div>
      </section>

      <section class="stock-grid">
        <div class="table-card">
          <h5>Low Quantity Stock</h5>
          <table class="table table-hover align-middle" id="lowStockTable">
            <thead>
              <tr>
                <th>Item</th>
                <th>Remaining</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody id="lowStockTableBody"></tbody>
          </table>
        </div>
      </section>
    </main>

    <script type="module" src="../js/pages/dashboard/dashboard.js"></script>
    <script
      type="module"
      src="../js/pages/dashboard/adminSubscribe.js"
    ></script>
    <script
      type="module"
      src="../js/pages/dashboard/dashboardSelector.js"
    ></script>
  </body>
</html>
